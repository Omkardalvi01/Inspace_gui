<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CanSat Trajectory Plot</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h2>CanSat Trajectory 3D Plot</h2>
    <div id="trajectory-plot" style="width: 100%; height: 600px;"></div>

    <script>
        async function fetchData() {
            const response = await fetch('dummy_cansat_data.csv');
            const data = await response.text();
            const rows = data.split('\n').slice(1); // Skip the header row
            const latitudes = [];
            const longitudes = [];
            const altitudes = [];

            rows.forEach(row => {
                const cols = row.split(',');
                latitudes.push(parseFloat(cols[7]));  // GNSS_LATITUDE
                longitudes.push(parseFloat(cols[8])); // GNSS_LONGITUDE
                altitudes.push(parseFloat(cols[9]));  // GNSS_ALTITUDE
            });

            return { latitudes, longitudes, altitudes };
        }

        async function plotTrajectory() {
            const { latitudes, longitudes, altitudes } = await fetchData();

            const trace = {
                x: longitudes,
                y: latitudes,
                z: altitudes,
                mode: 'lines',
                type: 'scatter3d',
                line: {
                    width: 6,
                    color: 'blue',
                    colorscale: 'Viridis'
                }
            };

            const layout = {
                title: '3D Trajectory of CanSat',
                scene: {
                    xaxis: { title: 'Longitude' },
                    yaxis: { title: 'Latitude' },
                    zaxis: { title: 'Altitude' }
                }
            };

            Plotly.newPlot('trajectory-plot', [trace], layout);
        }

        plotTrajectory();
    </script>
</body>
</html>
